property cnc ${cnc:map("target/cnc", 1024, 1024)}
property nextCorrelation [0x01 0x02 0x03 0x04] # TODO: use broadcast next correlation

connect agrona://stream/bidirectional
        option reader ${agrona:broadcastReceiver(cnc.controller)}
        option writer ${agrona:manyToOneWriter(cnc.nukleus)}

connected

write ${nextCorrelation}
write [0x02]
write [0x07] "nukleus"
write [0x00 0x00 0x00 0x01]
write flush

read ${nextCorrelation}
read [0x82]
read [0x06] "source"
read [0x00 0x00 0x00 0x00]
read [0x0b] "destination"
read [0x01] [0x7f 0x00 0x00 0x01]
read [0x1f 0x90]
