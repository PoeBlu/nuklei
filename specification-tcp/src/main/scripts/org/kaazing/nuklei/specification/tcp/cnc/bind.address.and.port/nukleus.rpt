property cncNew ${cnc:mapNew("target/nukleus-itests/tcp/cnc", 1024, 1024)}

accept agrona://stream/bidirectional
       option reader ${agrona:manyToOneReader(cncNew.nukleus)}
       option writer ${agrona:broadcastTransmitter(cncNew.controller)}

accepted
connected

read [0x00 0x00 0x00 0x01]
read ([0..8]:correlation)
read [0x06] "source"
read [0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00]
read [0x0b] "destination"
read [0x01] [0x7f 0x00 0x00 0x01]
read [0x1f 0x90]

write [0x40 0x00 0x00 0x01]
write ${correlation}
write [0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x01]
write flush

close
closed
